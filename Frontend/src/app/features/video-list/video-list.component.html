<div class="page">
  <h1 class="title">Movie Searcher</h1>

  @if (loading$ | async) {
  <div class="info">Loading videos...</div>
  } @if (error$ | async; as error) {
  <div class="info error">{{ error }}</div>
  }

  <div class="marquee">
    <div class="marquee-inner">
      @for (video of (videos$ | async) ?? []; track video.id) {
      <div class="card">
        <div class="thumb-wrapper">
          @if (video.thumbnailUrl) {
          <img [src]="video.thumbnailUrl" [alt]="video.title" />
          } @if (video.imdbRating) {
          <div class="rating">⭐ {{ video.imdbRating }}</div>
          }
        </div>

        <div class="card-body">
          <h2 class="card-title">{{ video.title }}</h2>

          <div class="meta-row">
            @if (video.category) { <span>{{ video.category }}</span> } @if (video.genre) {
            <span>• {{ video.genre }}</span> } @if (video.releaseYear) {
            <span>• {{ video.releaseYear }}</span> }
          </div>

          @if (video.language) {
          <div class="meta-row">Language: {{ video.language }}</div>
          } @if (video.description) {
          <p class="desc">{{ video.description }}</p>
          } @if (video.mainCast) {
          <p class="cast"><strong>Cast:</strong> {{ video.mainCast }}</p>
          }
        </div>
      </div>
      }

      <!-- DUPLIKÁLT LISTA a folyamatos tekeréshez -->
      @for (video of (videos$ | async) ?? []; track 'dup-' + video.id) {
      <div class="card">
        <div class="thumb-wrapper">
          @if (video.thumbnailUrl) {
          <img [src]="video.thumbnailUrl" [alt]="video.title" />
          } @if (video.imdbRating) {
          <div class="rating">⭐ {{ video.imdbRating }}</div>
          }
        </div>

        <div class="card-body">
          <h2 class="card-title">{{ video.title }}</h2>

          <div class="meta-row">
            @if (video.category) { <span>{{ video.category }}</span> } @if (video.genre) {
            <span>• {{ video.genre }}</span> } @if (video.releaseYear) {
            <span>• {{ video.releaseYear }}</span> }
          </div>

          @if (video.language) {
          <div class="meta-row">Language: {{ video.language }}</div>
          } @if (video.description) {
          <p class="desc">{{ video.description }}</p>
          } @if (video.mainCast) {
          <p class="cast"><strong>Cast:</strong> {{ video.mainCast }}</p>
          }
        </div>
      </div>
      }
    </div>
  </div>
</div>
